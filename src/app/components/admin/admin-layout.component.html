<!-- Admin Layout Component -->
<div class="admin-layout">
  <!-- Top Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
    <div class="container-fluid">
      <!-- Brand and Home Link -->
      <a class="navbar-brand d-flex align-items-center" (click)="goToHome()" style="cursor: pointer;">
        <i class="fas fa-cube me-2"></i>
        3D Inventory
      </a>

      <!-- Mobile Menu Toggle -->
      <button class="navbar-toggler d-lg-none" type="button" (click)="toggleMobileMenu()"
        [attr.aria-expanded]="mobileMenuOpen">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Desktop Sidebar Toggle -->
      <button class="btn btn-outline-light d-none d-lg-block me-3" (click)="toggleSidebar()"
        title="Toggle Sidebar">
        <i class="fas fa-bars"></i>
      </button>

      <!-- User Info and Actions -->
      <div class="navbar-nav ms-auto">
        <div class="nav-item dropdown">
          <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-user-circle me-2"></i>
            <span class="d-none d-md-inline">{{ currentUser?.name || 'Admin' }}</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <h6 class="dropdown-header">
                <i class="fas fa-user me-2"></i>
                {{ currentUser?.name || 'Admin User' }}
              </h6>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <a class="dropdown-item" (click)="goToProfile()" style="cursor: pointer;">
                <i class="fas fa-cog me-2"></i>
                Profile Settings
              </a>
            </li>
            <li>
              <a class="dropdown-item" (click)="goToHome()" style="cursor: pointer;">
                <i class="fas fa-home me-2"></i>
                Back to Main Site
              </a>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li>
              <a class="dropdown-item text-danger" (click)="logout()" style="cursor: pointer;">
                <i class="fas fa-sign-out-alt me-2"></i>
                Logout
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <div class="admin-content">
    <!-- Sidebar Navigation -->
    <aside class="sidebar" [class.collapsed]="sidebarCollapsed" [class.mobile-open]="mobileMenuOpen">

      <!-- Mobile Overlay -->
      <div class="mobile-overlay d-lg-none" [class.show]="mobileMenuOpen" (click)="closeMobileMenu()">
      </div>

      <!-- Sidebar Content -->
      <div class="sidebar-content">
        <!-- Admin Panel Header -->
        <div class="sidebar-header">
          <h5 class="text-center mb-0">
            <i class="fas fa-tools me-2"></i>
            <span [class.d-none]="sidebarCollapsed">Admin Panel</span>
          </h5>
        </div>

        <!-- User Role Info -->
        <div class="user-role-info" *ngIf="currentUser && !sidebarCollapsed">
          <div class="role-badge" [ngClass]="getUserRoleClass()">
            <i [class]="getUserRoleIcon()"></i>
            <span>{{ (currentUser.role || 'User') | titlecase }}</span>
          </div>
          <small class="text-muted d-block text-center mt-1">
            {{ getPermissionCount() }} permissions
          </small>
        </div>

        <!-- Navigation Menu -->
        <nav class="sidebar-nav">
          <ul class="nav flex-column">
            <li class="nav-item" *ngFor="let item of navigationItems">
              <a *ngIf="hasPermission(item.permission)" [routerLink]="item.path" routerLinkActive="active"
                class="nav-link" (click)="closeMobileMenu()"
                [title]="sidebarCollapsed ? item.label : item.description">
                <i [class]="item.icon + ' nav-icon'"></i>
                <span class="nav-text" [class.d-none]="sidebarCollapsed">
                  {{ item.label }}
                  <small class="nav-description d-block" *ngIf="!sidebarCollapsed">
                    {{ item.description }}
                  </small>
                </span>
              </a>
            </li>

            <!-- Show message if no items visible -->
            <li class="nav-item" *ngIf="getVisibleItemsCount() === 0">
              <div class="alert alert-info mx-2 mt-2" role="alert">
                <i class="fas fa-info-circle me-2"></i>
                <small>No menu items available for your role</small>
              </div>
            </li>
          </ul>
        </nav>

        <!-- Sidebar Footer -->
        <div class="sidebar-footer">
          <button class="btn btn-outline-secondary btn-sm w-100 d-none d-lg-block" (click)="toggleSidebar()"
            [title]="sidebarCollapsed ? 'Expand Sidebar' : 'Collapse Sidebar'">
            <i [class]="sidebarCollapsed ? 'fas fa-chevron-right' : 'fas fa-chevron-left'"></i>
            <span [class.d-none]="sidebarCollapsed" class="ms-2">
              {{ sidebarCollapsed ? '' : 'Collapse' }}
            </span>
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content" [class.sidebar-collapsed]="sidebarCollapsed">
      <!-- Page Content -->
      <div class="page-content">
        <!-- Breadcrumb Navigation -->
        <nav aria-label="breadcrumb" class="mb-4">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="['/']" class="text-decoration-none">
                <i class="fas fa-home"></i> Home
              </a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
              <i class="fas fa-tools"></i> Admin
            </li>
          </ol>
        </nav>

        <!-- Router Outlet for Admin Pages -->
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
